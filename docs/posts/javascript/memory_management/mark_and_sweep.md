# Mark & Sweep

전역객체로부터 도달할 수 있는지 여부(reachability)를 메모리 회수할 기준으로 가지는데, 도달할 수 있다면 회수하지 않고 도달할 수 없다면 해당 공간을 GC가 비워냅니다.

## Root

JS 코드에서 태생부터 도달가능한 변수들을 루트(root)라고 하는데 관련 예시는 다음과 같습니다.

- 함수의 지역변수 및 매개변수
- scope chain상 함수에서 사용되는 변수와 매개변수
- 전역변수

## 동작방식

JS 엔진은 코드를 실행하면서부터 끊임없이 root로부터 참조할 수 있는 값들을 확인합니다.

:::info
여기서 참조하는 방법은 [reference count](../memory_management/reference_count) 방식과 마찬가지로 변수나 객체의 속성, 함수의 매개변수 등이 가능합니다.

첫 번째 줄에서 전역객체로부터 도달가능한 여부를 따진 이유는 JS에서 전역변수나 함수의 정의는 모두 전역객체의 속성으로 저장되기 때문입니다.
:::

내부적으로 알고리즘의 실행과정은 그래프 이론의 너비 우선 탐색(BFS)과 동일합니다.

먼저 GC가 가능한 root의 정보를 모으고 각 root를 표시한 뒤, 각 root로부터 도달가능하고 아직 방문하지 않은 모든 객체들을 방문하여 표시하는 과정을 계속 반복합니다.

최종적으로 방문하지 않은 객체들의 메모리 공간은 이제 회수됩니다.
